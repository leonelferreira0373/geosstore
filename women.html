<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="description" content="GEOSSTORE Live Feed">
    <title>Shoe Store Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#111827",
                        "background-light": "#F3F4F6",
                        "background-dark": "#0f172a",
                        "card-light": "#FFFFFF",
                        "card-dark": "#1e293b",
                        "text-secondary-light": "#6B7280",
                        "text-secondary-dark": "#94a3b8",
                    },
                    fontFamily: {
                        display: ["-apple-system", "BlinkMacSystemFont", "SF Pro Text", "Helvetica Neue", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        'xl': '1rem',
                        '2xl': '1.5rem',
                    },
                },
            },
        };
    </script>
    <style>
        /* --- Apple-Style Search (exact from reference file #8) --- */
        :root {
            --apple-grey-bg: rgba(245, 245, 247, 0.8);
            --apple-text: #1d1d1f;
            --apple-muted: #86868b;
            --apple-blue: #0071e3;
            --focus-glow: rgba(0, 113, 227, 0.2);
        }

        body {
            font-weight: 300;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .search-wrapper {
            display: flex;
            align-items: center;
        }

        .search-input-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-icon {
            position: absolute;
            left: 8px;
            width: 16px;
            height: 16px;
            color: var(--apple-text);
            pointer-events: none;
            z-index: 10;
        }

        .dark .search-icon {
            color: #94a3b8;
        }

        .search-field {
            width: 32px;
            height: 32px;
            background: var(--apple-grey-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 999px !important;
            border: 1px solid transparent !important;
            padding: 0 16px 0 40px !important;
            font-size: 14px;
            color: var(--apple-text);
            cursor: pointer;
            outline: none;
            overflow: hidden;
            will-change: width, box-shadow, border-color;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .dark .search-field {
            background: rgba(50, 50, 55, 0.8);
            color: #f1f5f9;
        }

        .search-field::placeholder {
            color: transparent;
            transition: color 0.2s ease;
        }

        .search-field.is-expanded::placeholder {
            color: var(--apple-muted);
        }

        .search-field.is-expanded:focus {
            border-color: var(--apple-blue) !important;
            box-shadow: 0 0 0 4px var(--focus-glow);
        }

        .cancel-btn {
            font-size: 14px;
            color: var(--apple-blue);
            margin-left: 16px;
            background: none;
            border: none;
            cursor: pointer;
            opacity: 0;
            pointer-events: none;
            will-change: opacity, transform;
            transform: translateX(10px);
            white-space: nowrap;
        }

        .cancel-btn:hover {
            opacity: 0.8 !important;
        }
    </style>
</head>

<body
    class="bg-card-light dark:bg-card-dark font-display text-gray-900 dark:text-gray-100 h-screen w-full transition-colors duration-200 antialiased">
    <div class="w-full h-full flex flex-col overflow-hidden relative">
        <header
            class="flex items-center justify-between px-8 py-5 border-b border-gray-100 dark:border-gray-700 bg-card-light dark:bg-card-dark shrink-0 z-20 relative">
            <!-- Logo -->
            <div class="flex items-center gap-2">
                <img src="SVG/GS-LOGO-SVG-2.svg" alt="GS Logo" class="h-8 dark:invert" />
            </div>

            <!-- Center nav + search (absolute centered) -->
            <nav id="nav-container"
                class="hidden lg:flex items-center gap-4 absolute left-1/2 transform -translate-x-1/2">
                <a class="nav-item text-text-secondary-light dark:text-text-secondary-dark hover:text-black dark:hover:text-white transition-colors text-sm font-normal"
                    href="feed.html">MEN</a>
                <a class="nav-item text-black dark:text-white border-b-2 border-black dark:border-white pb-6 -mb-6 text-sm font-normal"
                    href="women.html">WOMEN</a>
                <a class="nav-item text-text-secondary-light dark:text-text-secondary-dark hover:text-black dark:hover:text-white transition-colors text-sm font-normal"
                    href="children.html">CHILDREN</a>

                <!-- Search (exact Apple pattern from reference) -->
                <div class="search-wrapper ml-1">
                    <div class="search-input-container">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" class="search-field" placeholder="Search" id="searchInput">
                    </div>
                    <button class="cancel-btn" id="cancelBtn">Cancel</button>
                </div>
            </nav>

            <!-- Shopping Bag -->
            <div class="flex items-center gap-4">
                <a href="checkout.html"
                    class="relative p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all group active:scale-95">
                    <span
                        class="material-icons-outlined text-gray-700 dark:text-gray-300 group-hover:text-black dark:group-hover:text-white"
                        style="font-size: 24px;">shopping_bag</span>
                    <!-- Cart Counter Badge -->
                    <span id="cart-counter"
                        class="absolute top-1 right-1 bg-red-500 text-white text-[9px] font-normal min-w-[18px] h-[18px] px-1 flex items-center justify-center rounded-full border-2 border-white dark:border-card-dark shadow-sm">
                        0
                    </span>
                </a>
            </div>
        </header>
        <main class="flex flex-1 overflow-hidden">
            <main class="flex-1 flex flex-col p-8 overflow-hidden bg-white dark:bg-card-dark relative">

                <div class="overflow-y-auto pr-2 pb-20">
                    <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        <!-- Products will be injected here automatically by JavaScript -->
                    </div>
                    <div class="mt-8 flex justify-between items-center">
                        <span id="result-count"
                            class="text-sm text-text-secondary-light dark:text-text-secondary-dark">Showing all
                            results</span>
                        <div class="flex items-center gap-2">
                            <button
                                class="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700">
                                <span class="material-icons-outlined text-sm">chevron_left</span>
                            </button>
                            <button
                                class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center font-normal text-sm">1</button>
                            <button
                                class="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 text-sm">2</button>
                            <button
                                class="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 text-sm">3</button>
                            <span class="text-gray-400">...</span>
                            <button
                                class="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700">
                                <span class="material-icons-outlined text-sm">chevron_right</span>
                            </button>
                        </div>
                    </div>
                </div>
            </main>
            <aside id="product-details-sidebar"
                class="w-full sm:w-[380px] absolute right-0 top-0 bottom-0 z-40 lg:relative lg:z-auto border-l border-gray-100 dark:border-gray-700 bg-white dark:bg-card-dark p-6 hidden flex-col overflow-y-auto shadow-2xl lg:shadow-none">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-normal">Product Details</h2>
                    <div class="flex items-center gap-3">
                        <a class="text-xs font-normal flex items-center gap-1 hover:underline" href="#">
                            See all <span class="material-icons-outlined text-xs">arrow_forward</span>
                        </a>
                        <button onclick="closeProductDetails()"
                            class="hover:bg-gray-100 dark:hover:bg-gray-700 p-1.5 rounded-full flex items-center justify-center transition-colors">
                            <span class="material-icons-outlined text-sm">close</span>
                        </button>
                    </div>
                </div>
                <div class="flex gap-4 mb-6 border-b border-gray-100 dark:border-gray-700 pb-1">
                    <button
                        class="px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-xs font-normal">Descriptions</button>
                    <button
                        class="px-4 py-2 text-xs text-text-secondary-light dark:text-text-secondary-dark hover:text-black dark:hover:text-white font-normal">Inventory</button>
                    <button
                        class="px-4 py-2 text-xs text-text-secondary-light dark:text-text-secondary-dark hover:text-black dark:hover:text-white font-normal">Price</button>
                </div>
                <div
                    class="bg-gray-50 dark:bg-gray-700 rounded-2xl mb-6 overflow-hidden flex justify-center items-center h-96 relative">
                    <img alt="Detail View Shoe" class="object-cover w-full h-full drop-shadow-xl"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuCuhoxRvzZQIUsratBj7RnyasCu044oUQWEsNmmMWrRh0vn6JOwEldZVu8ZG4YNdnzyn-Djc02gfAsA1KV6gDUWeXG-fDptWGHNnllkksDoDKEjaYacNyY6s6OBFUXwQgTkw8ZxjaBbLfLN_Gf7KAhOhu4OJ5voqVzD4pf1Z1hYbRCkZuDeu-XNYSwpPDF0flNxaqW90r60mPH21J_WK82UZhNuNsCALgoDKHTTfXS0EUcWGdu_axT7X4D4vfujEyDwUTI_x00A8bur" />
                </div>
                <div class="mb-4">
                    <h3 class="font-normal mb-4">Descriptions</h3>
                    <div class="border border-gray-100 dark:border-gray-700 rounded-2xl p-4">
                        <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark mb-1">Men's Shoe</p>
                        <h4 class="font-normal text-lg mb-1">Mike Air Max Shoes</h4>
                        <div class="flex items-center gap-1 mb-4">
                            <div class="flex text-yellow-400 text-xs">
                                <span class="material-icons-outlined text-sm">star</span>
                                <span class="material-icons-outlined text-sm">star</span>
                                <span class="material-icons-outlined text-sm">star</span>
                                <span class="material-icons-outlined text-sm">star</span>
                                <span class="material-icons-outlined text-sm text-gray-300">star</span>
                            </div>
                            <span class="text-xs text-gray-400">4.0 (99+)</span>
                        </div>
                        <h5 class="font-normal text-sm mb-2">Description</h5>
                        <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark leading-relaxed">
                            This upscale hill in a contemporary high-rise is a 4-minute walk from Surfers Paradise Beach
                            and 5 km from Sea World theme park... <a class="text-black dark:text-white font-normal"
                                href="#">Read more</a>
                        </p>
                    </div>
                </div>
                <div class="mb-6">
                    <h5 class="font-normal text-sm mb-3">Select Size</h5>
                    <div class="flex gap-2">
                        <button
                            class="w-10 h-8 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center text-xs hover:border-black dark:hover:border-white">US
                            7</button>
                        <button
                            class="w-10 h-8 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center text-xs hover:border-black dark:hover:border-white">US
                            8</button>
                        <button
                            class="w-10 h-8 rounded-lg bg-black text-white dark:bg-white dark:text-black flex items-center justify-center text-xs font-normal">US
                            9</button>
                        <button
                            class="w-10 h-8 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center text-xs hover:border-black dark:hover:border-white">US
                            9.5</button>
                        <button
                            class="w-10 h-8 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center text-xs hover:border-black dark:hover:border-white">US
                            10</button>
                    </div>
                </div>
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h5 class="font-normal text-sm mb-3">Choose color</h5>
                        <div class="flex gap-2">
                            <button
                                class="w-6 h-6 rounded-full bg-black ring-2 ring-offset-2 ring-gray-200 dark:ring-offset-gray-800 dark:ring-gray-600"></button>
                            <button class="w-6 h-6 rounded-full bg-gray-400"></button>
                            <button class="w-6 h-6 rounded-full bg-white border border-gray-200"></button>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 bg-gray-50 dark:bg-gray-700 rounded-full px-2 py-1 mt-6">
                        <button
                            class="w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center text-gray-500 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500">
                            <span class="material-icons-outlined text-xs">remove</span>
                        </button>
                        <span class="text-sm font-normal">01</span>
                        <button
                            class="w-6 h-6 rounded-full bg-black text-white dark:bg-white dark:text-black flex items-center justify-center">
                            <span class="material-icons-outlined text-xs">add</span>
                        </button>
                    </div>
                </div>
                <div class="flex gap-3 mt-auto">
                    <button
                        class="flex-1 py-3 rounded-full border border-gray-200 dark:border-gray-600 text-sm font-normal hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">Add
                        to Cart</button>
                    <button
                        class="flex-1 py-3 rounded-full bg-primary text-white text-sm font-normal hover:bg-gray-800 transition-colors shadow-lg shadow-gray-200 dark:shadow-none">Buy
                        Now</button>
                </div>
            </aside>
        </main>
    </div>
    <script>
        // --- Real Backend Integration ---
        const API_URL = 'http://localhost:4000/api/products';
        let products = [];

        async function fetchProducts() {
            try {
                const response = await fetch(API_URL);
                products = await response.json();
                renderProducts();
            } catch (err) {
                console.error("Error fetching products:", err);
            }
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            const resultCount = document.getElementById('result-count');

            if (products.length === 0) {
                grid.innerHTML = '<p class="col-span-full text-center text-gray-500 py-20">No products found in the database.</p>';
                if (resultCount) resultCount.innerText = 'Showing 0 results';
                return;
            }

            if (resultCount) {
                resultCount.innerText = `Showing all ${products.length} results`;
            }

            grid.innerHTML = products.map(product => `
                <div onclick="openProductDetails(${product.id})" class="bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-2xl p-4 hover:shadow-lg transition-all cursor-pointer group">
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-xl mb-4 overflow-hidden flex justify-center items-center h-80">
                        <img alt="${product.name}" class="object-cover w-full h-full group-hover:scale-105 transition-transform duration-500" src="${product.image}" />
                    </div>
                    <h3 class="font-normal text-sm mb-1 truncate">${product.name}</h3>
                    <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark mb-4">Rp ${product.price}</p>
                    <div class="flex justify-between items-center text-[10px] text-text-secondary-light dark:text-text-secondary-dark">
                        <span>Stock <span class="text-black dark:text-white font-normal">${product.stock}</span></span>
                        <span>Sold <span class="text-black dark:text-white font-normal">${product.sold}</span></span>
                    </div>
                </div>
            `).join('');
        }

        // Global function for Admin Submission
        window.addProduct = function (data) {
            const newProduct = {
                id: Date.now(),
                name: data.name || "Untitled Product",
                price: data.price || "Rp 0",
                stock: data.stock || 0,
                sold: 0,
                image: data.image || "https://via.placeholder.com/400"
            };
            products.unshift(newProduct); // Add to beginning of list
            renderProducts();
        };

        // Initialize display
        renderProducts();

        function openProductDetails(id) {
            // Find specific product if needed to populate sidebar
            const product = products.find(p => p.id === id);
            if (product) {
                // You can update sidebar here if needed
                const sideImg = document.querySelector('#product-details-sidebar img');
                const sideSubTitle = document.querySelector('#product-details-sidebar p.text-xs');
                const sideTitle = document.querySelector('#product-details-sidebar h4.font-normal');

                if (sideImg) sideImg.src = product.image;
                if (sideTitle) sideTitle.innerText = product.name;
            }

            const sidebar = document.getElementById('product-details-sidebar');
            sidebar.classList.remove('hidden');
            sidebar.classList.add('flex');
        }

        function closeProductDetails() {
            const sidebar = document.getElementById('product-details-sidebar');
            sidebar.classList.remove('flex');
            sidebar.classList.add('hidden');
        }

        // Apple-style Search Animation (exact from reference file #8)
        const searchInput = document.getElementById('searchInput');
        const cancelBtn = document.getElementById('cancelBtn');
        const navItems = document.querySelectorAll('.nav-item');
        const searchIcon = document.querySelector('.search-icon');
        const searchField = document.querySelector('.search-field');
        const navContainer = document.getElementById('nav-container');

        const searchTl = gsap.timeline({
            paused: true,
            onReverseComplete: () => {
                searchField.classList.remove('is-expanded');
                searchField.blur();
                searchField.value = '';
            }
        });

        // Initialize container state for GSAP
        gsap.set(navContainer, { xPercent: -50, x: 0 });

        // 1. Nav links push & fade
        searchTl.to(navItems, {
            x: -20,
            opacity: 0,
            duration: 0.3,
            stagger: 0.05,
            ease: "power2.out",
            pointerEvents: "none"
        }, 0);

        // 2. Shift nav container left to center the expanded search bar precisely
        searchTl.to(navContainer, {
            x: -150,
            duration: 0.5,
            ease: "power2.out"
        }, 0);

        // 3. Icon color transition
        searchTl.to(searchIcon, {
            color: '#86868b',
            duration: 0.3
        }, 0);

        // 4. Search bar expansion
        searchTl.to(searchField, {
            width: 300,
            duration: 0.5,
            cursor: "text",
            ease: "back.out(1.7)"
        }, 0);

        // 5. Cancel button reveal
        searchTl.to(cancelBtn, {
            opacity: 1,
            x: 0,
            pointerEvents: "auto",
            duration: 0.4,
            ease: "power2.out"
        }, 0.2);

        // Interactions
        searchInput.addEventListener('click', () => {
            if (!searchField.classList.contains('is-expanded')) {
                searchField.classList.add('is-expanded');
                searchTl.play();
                setTimeout(() => { searchInput.focus(); }, 100);
            }
        });

        cancelBtn.addEventListener('click', () => {
            searchTl.reverse();
        });
    </script>
</body>

</html>